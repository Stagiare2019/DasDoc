{# 
    Ce template contient les macros de tous les scripts et importations de scripts.
    Ils font effet uniquement sur des classes donc attention à bien nommer les attributs "class" des éléments concernés
    pour que les scripts fassent effet sur eux -> class="datepicker" par ex

    Les scripts faisant effet sur un élément en particulier sont à mettre dans le template contenant l'élément

#}

{% macro dropdown() %}

  {# Scripts assurant le fonctionnement des dropdowns #}
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/popper.min.js"
      integrity="sha256-1XfFQxRfNvDJW3FdZ+xlo2SbodG2+rFArw6XsVzu3bc="
      crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha256-CjSoeELFOcH0/uxWu6mC/Vlrc1AARqbm/jiiImDGV3s="
      crossorigin="anonymous"></script>
  {#
    scripts importés : 
      - jquery.js
      - popper.js
      - bootstrap.js
    dernières versions depuis le 04/06/2019
  #}

{% endmacro %}

{% macro datepicker() %}

	{# Scripts assurant le fonctionnement des datepickers #}
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
			integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
			crossorigin="anonymous"></script>
	<script>
  	$( function() {
    	$( ".datepicker" ).datepicker( {
    		dateFormat: "dd/mm/yy",
    		dayNames: [ "Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi" ],
    		dayNamesMin: [ "Di", "Lu", "Ma", "Me", "Je", "Ve", "Sa" ],
    		dayNamesShort: [ "Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam" ],
    		monthNames: [ "Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre" ],
    		monthNamesShort: [ "Jan", "Fev", "Mars", "Avr", "Mai", "Jun", "Jul", "Aout", "Sep", "Oct", "Nov", "Dec" ]
    	});
  	} );
  	</script>
  	{#
  		dépendances :
  			- jquery.js (déjà importé -> nav)
  			- jquery-ui.js
		documentation des méthodes et attributs de datepicker() :
			- "http://api.jqueryui.com/datepicker/"
		dernière version depuis le 04/06/2019 
  	#}

{% endmacro %}

{% macro datatable() %}

	{# Scripts assurant le fonctionnement des tables de données #}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/js/jquery.dataTables.min.js"
			integrity="sha256-t5ZQTZsbQi8NxszC10CseKjJ5QeMw5NINtOXQrESGSU="
			crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
			integrity="sha256-hJ44ymhBmRPJKIaKRf3DSX5uiFEZ9xB/qx8cNbJvIMU="
			crossorigin="anonymous"></script>
	<script>
	$(document).ready(function() {
	   var oTable = $('#brouillon').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );

		$('#brouillon tbody tr').each( function() {
       
		 	var nTds = $('td',this);
			
        	var sTitle = $(nTds[3]).text();
	
			if(sTitle.length >32 )
			{
				$(nTds[3]).text(sTitle.substr(0,33));
			}
			$(nTds[3]).attr( 'title', sTitle );
    	} );
     
    /* Init DataTables */
 
    /* Apply the tooltips */
    oTable.$('td[title]').tooltip( {
        "delay": 0,
        "track": true,
        "fade": 250
    } );

		
	} );

	{# partie Acte en attente de validation #}

	/*partie Agent */
	$(document).ready(function() {
	   var oTable= $('#attente').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );

		$('#attente tbody tr').each( function() {
       
		 	var nTds = $('td',this);
			
        	var sTitle = $(nTds[3]).text();
	
			if(sTitle.length >32 )
			{
				$(nTds[3]).text(sTitle.substr(0,33));
			}
			$(nTds[3]).attr( 'title', sTitle );
    	} );

		$('#attente tbody tr').each( function() {
       
		 	var nTds = $('td',this);
		
			$(nTds[4]).attr( 'title', 'en attente de validation' );
    	} );
     
    /* Init DataTables */
 
    /* Apply the tooltips */
    oTable.$('td[title]').tooltip( {
        "delay": 0,
        "track": true,
        "fade": 250
    } );

		
	} );

	/* partie valideur*/
	
$(document).ready(function() {
	   var oTable= $('#attentevalideur').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );

		$('#attentevalideur tbody tr').each( function() {
       
		 	var nTds = $('td',this);
			
        	var sTitle = $(nTds[3]).text();
	
			if(sTitle.length >32 )
			{
				$(nTds[3]).text(sTitle.substr(0,33));
			}
			$(nTds[3]).attr( 'title', sTitle );
    	} );

		
    /* Init DataTables */
 
    /* Apply the tooltips */
    oTable.$('td[title]').tooltip( {
        "delay": 0,
        "track": true,
        "fade": 250
    } );

		
	} );

	{#partie actes validés#}

	$(document).ready(function() {
	   var oTable= $('#valide').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );

		$('#valide tbody tr').each( function() {
       
		 	var nTds = $('td',this);
			
        	var sTitle = $(nTds[3]).text();
	
			if(sTitle.length >32 )
			{
				$(nTds[3]).text(sTitle.substr(0,33));
			}
			$(nTds[3]).attr( 'title', sTitle );
    	} );

		
     
     
    /* Init DataTables */
 
    /* Apply the tooltips */
    oTable.$('td[title]').tooltip( {
        "delay": 0,
        "track": true,
        "fade": 250
    } );

		
	} );

	{#Partie actes à archivés #}

	$(document).ready(function() {
	   var oTable= $('#archive').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );

		$('#archive tbody tr').each( function() {
       
		 	var nTds = $('td',this);
			
        	var sTitle = $(nTds[3]).text();
	
			if(sTitle.length >32 )
			{
				$(nTds[3]).text(sTitle.substr(0,33));
			}
			$(nTds[3]).attr( 'title', sTitle );
    	} );


		$('#archive tbody tr').each( function() {
       
		 	var nTds = $('td',this);
		
			$(nTds[5]).attr( 'title', 'archiver' );
    	} );
     
    /* Init DataTables */
 
    /* Apply the tooltips */
    oTable.$('td[title]').tooltip( {
        "delay": 0,
        "track": true,
        "fade": 250
    } );

		
	} );

	{# Partie concernant le transmetteur #}

	$(document).ready(function() {
	$('#tabtransmettre').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );
		
		
		$('#btntransmettre').click(function(){
			
			if($('#transmettre').hasClass("d-none"))
			{
				$('#transmettre').removeClass('d-none');
				
			}
			else
			{
				$('#transmettre').addClass("d-none")
			}
			

		});
	});
	{#Partie concernant l'historique #}

	$(document).ready(function() {
	$('#tabhistorique').DataTable( {
	        "language": {
	            "url": "/json/French_DataTable.json"
	        },
			"order": [[ 1, "desc" ]],
			 "searching": false
			
	  
	    } );
		
		
		$('#btnhistorique').click(function(){
			
			if($('#historique').hasClass("d-none"))
			{
				$('#historique').removeClass('d-none');
				
			}
			else
			{
				$('#historique').addClass("d-none")
			}
			

		});
	});

	</script>
	{#
		dépendances (voir "https://cdn.datatables.net/" (sélectionner bootstrap 4)) : 
			- datatables.jquery.js
			- datatables.bootstrap4.js
		dernières versions depuis le 04/06/2019 
	#}

	
{% endmacro %}

{% macro tagsinput() %}

	{# Scripts assurant le fonctionnement des tagsinput #}
	<script src="/js/jquery.tagsinput-revisited.js"></script>
	<script>
	$('.tagsinput').tagsInput({
		placeholder: 'Ajouter un mot-clé',
  		maxChars: 50
	});
	$('.tagsinput').tagsInput({
  		autocomplete: {option: value, option: value}
	});
	</script>
  	{#
  		dépendances :
  			- jquery.js (déjà importé -> nav)
  			- jquery-ui.js (déjà importé -> datepickers)
  		documentation des méthodes et attributs de tagsInput() :
  			- "https://github.com/underovsky/jquery-tagsinput-revisited"
		dernière version depuis le 04/06/2019 
  	#}

{% endmacro %}


